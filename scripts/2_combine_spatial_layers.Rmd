---
title: "Combine spatial layers"
author: "Rich Cottrell"
date: "11/03/2022"
output: html_document
---

```{r}
library(sf)
library(tidyverse)
library(janitor)
library(here)
library(rmapshaper)

library(ozmaps)
```

Flood awareness extent from Brisbane City Council
```{r}

flood_extents_shp <- st_read(here("data/spatial/Flood__Awareness__Extents/Flood___Awareness___Extents.shp"))


ggplot()+
  geom_sf(data = flood_extents_shp, fill="lightblue", colour = "grey90", size = 0.01)+
  theme_bw()


```
Historic event extents - read and plot for vis

```{r}

flood_1893 <- st_read(here("data/spatial/QSC_1893/Flood_extent_polygon___February_1893___Brisbane_and_Bremer_Rivers.shp")) 

flood_1974 <- st_read(here("data/spatial/QSC_1974/Flood_extent___Brisbane_and_Ipswich___1974.shp"))

flood_2011 <- st_read(here("data/spatial/QSC_2011/Flood_extent___Queensland___Jan_2011.shp"))

ggplot()+
  geom_sf(data = flood_2011, fill="lightblue", size = 0.01)

ggplot()+
  geom_sf(data=flood_1893, fill="lightblue", size=0.01)

ggplot()+
  geom_sf(data = flood_1974, fill="lightblue", size=0.01)


flood_1893_1974 <- st_union(flood_1893, flood_1974)


ggplot()+
  geom_sf(data = st_union(flood_1893, flood_1974), fill="lightblue", size=0.01)

```

#Brisbane admin regions   

```{r}

lgas <- ozmaps::ozmap_data(data = "abs_lga")

unique(lgas$NAME)[grep("Brisbane", unique(lgas$NAME))]

bris_lga <- lgas %>% filter(NAME == "Brisbane (C)" )


ggplot()+
  geom_sf(data = st_intersection(bris_lga, flood_1893_1974))

```

