### ------------------------------------------------------------------------ ###
### ------------------------ SHAPEFILE CROPPING CODE ----------------------- ###
### ------------------------------------------------------------------------ ###



### Libraries: ------------------------------------------------------------- ###
### ------------------------------------------------------------------------ ###
library(sf)
library(dplyr)
library(ggplot2)
library(stringr)





### SHAPEFILE CROPPING: ---------------------------------------------------- ###
### ------------------------------------------------------------------------ ###

SF <- read_sf("../FULL SA2","SA2_2021_AUST_GDA2020")

BRIS <- SF %>%
  filter(STE_NAME21 == "Queensland" &
           GCC_NAME21 == "Greater Brisbane" &
           SA4_NAME21 %in%  c("Brisbane - East","Brisbane - North", "Brisbane - South", "Brisbane - West", "Brisbane Inner City")
         )
BRIS$SA2_NAME21[str_detect(BRIS$SA2_NAME21, "Island")]
BRIS$SA2_NAME21[str_detect(BRIS$SA2_NAME21, "Lytton")]
excl <- c("North Stradbroke Island", "Southern Moreton Bay Islands", "Brisbane Port - Lytton")

BRIS <- BRIS[BRIS$SA2_NAME21!=excl,]

ggplot() +
  geom_sf(data=BRIS, fill=NA, color="black")

dir.create("data/spatial/SA2_2021_BRIS_SHAPE")

write_sf(BRIS, "data/spatial/SA2_2021_BRIS_SHAPE/SA2_2021_BRIS.shp")










# ---------------------------------------------------------------------------- #