---
title: "ergon_network"
author: "Catherine Kim"
date: "06/06/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Exploring Ergon Energy Overhead and Underground network files


```{r libraries}
library(sf)
library(tidyverse)
library(janitor)
library(here)
library(rmapshaper)

library(ozmaps)
```

Read in files and plot

```{r echo=FALSE}
network <- st_read(here('data/spatial/ErgonEnergy_overhead_underground_network/Network.shp'))

network

plot(network)

ggplot() +
  geom_sf(data = network, aes(color = ASSET_TYPE)) +
  theme_bw()
```

### pull out regions

```{r}
ggplot() +
  geom_sf(data = network, aes(color = REGION)) +
  theme_bw()

class(network$REGION)
SW_network <- filter(network, REGION == 'South West')
plot(SW_network["FDR_NO"])

st_write(SW_network, here("data/processed_data/ErgonEnergy/SW_EE_overheadunderground_network.shp"))
```

### Crop using LGA shapefile

```{r lgas}
lgas <- ozmaps::ozmap_data(data = "abs_lga")

bris_lga <- lgas %>% filter(NAME == unique(lgas$NAME)[grep("Brisbane", unique(lgas$NAME))])
plot(bris_lga)

bris_lga_bbox <- st_bbox(bris_lga)
```
Crop/intersect not working... 0 observtions. has a warning.

```{r}
bris_network <- st_crop(network, bris_lga_bbox)
bris_network <- st_intersection(network, bris_lga)

plot(bris_network)
```

## Ergon substations

```{r}
substations <- st_read(here('data/spatial/ErgonEnergy_zone_substations/ZoneSubstations.shp'))
substations

plot(substations)

ggplot() +
  geom_sf(data = substations, aes(color = REGION)) +
  theme_bw()
```

```{r}
SW_substations <- filter(substations, REGION == 'South West')

ggplot() +
  geom_sf(data = SW_substations) +
  theme_bw()
```

