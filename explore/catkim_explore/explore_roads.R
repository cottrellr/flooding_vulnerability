## Exploring road network data
## Catherine Kim
## 4 April 2022

library(terra)
library(sf)
library(tidyverse)

#data <- st_read('QLD_Roads-Tracks.gdb') # dataframe

roads <- read_sf('QLD_Roads-Tracks.gdb') # tibble
st_crs(roads)

# plot(roads) # plots all columns

# plot geometry
plot(st_geometry(roads))

# crop to bounding box of 2011 flood extent
# -27.7, -27.4, 152.75, 152.20

# not working
box <-  c(152.20, -27.7, 152.75, -27.4)
seq_roads <-  st_crop(roads, st_bbox(box))

# brisbane city lga
roads$LGA_NAME_LEFT

# as a factor
roads$LGA_NAME_LEFT <- as.factor(roads$LGA_NAME_LEFT)
roads$LGA_NAME_RIGHT <- as.factor(roads$LGA_NAME_RIGHT)

BC_roads <- roads %>% 
  select(LGA_NAME_LEFT, LGA_NAME_RIGHT) %>% 
    filter( LGA_NAME_LEFT == 'Brisbane City',
             LGA_NAME_RIGHT == 'Brisbane City') 
%>% 
  droplevels()
plot(st_geometry(BC_roads))

levels(BC_roads$LGA_NAME_LEFT)
